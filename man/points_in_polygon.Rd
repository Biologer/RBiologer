% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/05_biologer.R
\name{points_in_polygon}
\alias{points_in_polygon}
\title{Filter Spatial Points Falling Within a Polygon}
\usage{
points_in_polygon(polygon = NULL, data = NULL, verbose = FALSE)
}
\arguments{
\item{polygon}{An object of class \code{sf} (or coercible to \code{sf}) representing
the area of interest (the spatial filter). Must be provided.}

\item{data}{A \code{data.table} or \code{sf} object containing observation points.
If \code{NULL}, the full dataset is loaded via \code{open_data()}. The data must contain
columns named 'decimalLongitude' and 'decimalLatitude' if passed as a \code{data.table}.}

\item{verbose}{Logical. If \code{TRUE}, messages about automatic data loading, CRS
conversion, and data conversion are printed. Defaults to \code{FALSE}.}
}
\value{
An object of class \code{sf} containing only the points from the input
\code{data} that fall strictly within the \code{polygon}.
}
\description{
This function filters observation data points (\code{data}) to return only
those points that are geographically contained within the provided spatial polygon
(\code{polygon}). It handles automatic conversion of raw data into an sf object and ensures
Coordinate Reference Systems (CRS) match before performing the spatial join.
}
\details{
The function uses \code{sf::st_within} with \code{left = FALSE} to
ensure only points entirely inside the polygon are returned, and only once.
If the CRS of the \code{polygon} and \code{points} do not match, the
\code{polygon} is transformed to match the \code{points}' CRS.
}
\examples{
\dontrun{
# Assuming 'my_polygon_sf' is a pre-loaded sf polygon and 'my_data_dt' is a data.table

# 1. Filter a pre-loaded data.table
filtered_data <- points_in_polygon(polygon = my_polygon_sf, data = my_data_dt)

# 2. Filter the full dataset (data = NULL)
filtered_full <- points_in_polygon(polygon = my_polygon_sf, verbose = TRUE)
}
}
